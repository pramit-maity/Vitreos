<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VITREOS â€” AI Medical Advisor</title>
  
  <!-- External CSS -->
  >
  
  <!-- External Libraries -->
  //fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <!-- Loader -->
  <div class="loader" id="ls">
    <div class="lds">
      <div></div><div></div><div></div>
    </div>
    <div class="ldt">VITREOS</div>
    <div class="ldsub">Initializing Neural Systems...</div>
  </div>

  <!-- Particle Canvas -->
  anvas id="pc"></canvas>

  <!-- Toast Container -->
  <div class="toast-container" id="tc"></div>

  <!-- Header -->
  <header class="hdr">
    <div class="logo">VITREOS<span class="ver">v3</span></div>
    <nav class="nl" id="nl">
      <button class="nl-button act" data-p="home" onclick="goPage('home')">ğŸ¥ Health Advisor</button>
      <button class="nl-button" data-p="voice" onclick="goPage('voice')">ğŸ¤ Voice</button>
      <button class="nl-button" data-p="allergy" onclick="goPage('allergy')">ğŸ§ª Allergies</button>
      <button class="nl-button" data-p="analyzer" onclick="goPage('analyzer')">ğŸ’Š Analyzer</button>
      <button class="nl-button" data-p="consult" onclick="goPage('consult')">ğŸ©º Consult</button>
      <button class="nl-button" data-p="dash" onclick="goPage('dash')">ğŸ“Š Dashboard</button>
      <button class="nl-button" data-p="food" onclick="goPage('food')">ğŸ Nutrition</button>
      <button class="nl-button" data-p="telehealth" onclick="goPage('telehealth')">ğŸ‘¨â€âš•ï¸ Telehealth</button>
      <button class="nl-button" data-p="emergency" onclick="goPage('emergency')">ğŸš¨ Emergency</button>
      <button class="nl-button" data-p="appointments" onclick="goPage('appointments')">ğŸ“… Appointments</button>
      <button class="nl-button" data-p="billing" onclick="goPage('billing')">ğŸ’³ Billing</button>
    </nav>
    <button class="ham" id="ham">â˜°</button>
    <button class="tbtn" id="tbtn">ğŸŒ™</button>
  </header>

  <main class="container">
    <!-- HOME PAGE / ADVISOR -->
    <div class="page active" id="page-home">
      <div class="sec-hdr">
        <h1 class="sh">ğŸ¥ Health Advisor</h1>
        <p class="shsub">AI-powered clinical analysis engine</p>
      </div>

      <form class="af" id="af">
        <div class="fg">
          abel>Blood Group</label>
          <select name="bg" class="fi" required>
            <option value="">Select</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
          </select>
        </div>
        <div class="fg">
          abel>Blood Pressure (Systolic)</label>
          <input type="number" name="bp" class="fi" placeholder="e.g., 120" min="60" max="250">
        </div>
        <div class="fg">
          abel>WBC Count (10â¹/L)</label>
          <input type="number" step="0.1" name="wbc" class="fi" placeholder="Normal: 4.5-11.0">
        </div>
        <div class="fg">
          abel>Platelet Count (10â¹/L)</label>
          <input type="number" name="plt" class="fi" placeholder="Normal: 150-400">
        </div>
        <div class="fg">
          abel>Hemoglobin (g/dL)</label>
          <input type="number" step="0.1" name="hgb" class="fi" placeholder="Normal: 12-17.5">
        </div>
        <div class="fg">
          abel>Hematocrit (%)</label>
          <input type="number" step="0.1" name="hct" class="fi" placeholder="Normal: 36-52">
        </div>
        <div class="fg">
          abel>RBC Count (10Â¹Â²/L)</label>
          <input type="number" step="0.01" name="rbc" class="fi" placeholder="Normal: 4.2-5.9">
        </div>
        <div class="fg">
          abel>MCV (fL)</label>
          <input type="number" step="0.1" name="mcv" class="fi" placeholder="Normal: 80-100">
        </div>
        <div class="fg">
          abel>Known Allergies</label>
          <input type="text" name="al" class="fi" placeholder="e.g., Peanuts, Penicillin">
        </div>
        <div class="fg">
          abel>Current Medication</label>
          <input type="text" name="med" class="fi" placeholder="e.g., Aspirin, Metformin">
        </div>
        <div class="fg">
          abel>Dosage</label>
          <input type="text" name="dos" class="fi" placeholder="e.g., 500mg daily">
        </div>
        <div class="fg">
          abel>Environmental Factors</label>
          <textarea name="env" class="fi ta" rows="2" placeholder="Pollution, Smoking, Stress levels..."></textarea>
        </div>
        <button type="submit" class="abtn">ğŸ”¬ Analyze Health Profile</button>
      </form>

      <div class="disclaimer">
        âš ï¸ <strong>Disclaimer:</strong> VITREOS provides AI-assisted analysis for informational purposes only. Always consult licensed healthcare professionals for medical decisions.
      </div>

      <div class="rg" id="rg"></div>
    </div>

    <!-- VOICE PAGE -->
    <div class="page" id="page-voice">
      <div class="sec-hdr">
        <h1 class="sh">ğŸ¤ Voice AI Assistant</h1>
        <p class="shsub">Speak your symptoms naturally</p>
      </div>

      <div class="vc">
        <button class="mbtn" id="mbtn">ğŸ¤</button>
        <div class="ms" id="ms">READY</div>
        <div class="mw" id="mw">
          <div class="wv" id="wv">
            <div></div><div></div><div></div><div></div>
          </div>
        </div>
      </div>

      <div class="vt" id="vtr"><em style="color:var(--dim)">Speak to begin...</em></div>

      <div class="vsym" id="vsym">
        <span style="font-size:12.5px;color:var(--dim);font-style:italic">Symptoms will appear here...</span>
      </div>

      <button class="btn bv" id="vabtn" style="margin-top:18px">ğŸ§  Analyze with AI</button>
      <button class="btn bs" id="vcbtn" style="margin-top:8px">ğŸ”„ Clear & Restart</button>

      <div class="vres" id="vres" style="display:none">
        <div id="vresc"></div>
      </div>
    </div>

    <!-- ALLERGY PAGE -->
    <div class="page" id="page-allergy">
      <div class="sec-hdr">
        <h1 class="sh">ğŸ§ª Allergy Analyzer</h1>
        <p class="shsub">Deep immunological cross-reference analysis</p>
      </div>

      <div id="allergy-report-chips" style="display:none;margin-bottom:18px">
        <div style="font-family:var(--fd);font-size:9px;letter-spacing:1.5px;color:var(--dim);margin-bottom:8px;text-transform:uppercase">
          REPORT ALLERGENS
        </div>
        <div id="allergy-chips-wrap" style="display:flex;flex-wrap:wrap;gap:6px"></div>
      </div>

      <div class="fg">
        <input type="text" id="asrch" class="fi" placeholder="Enter allergen (e.g., Peanuts, Latex, Shellfish...)" style="font-size:14px">
        <div class="fch">
          <button class="fc act" onclick="setAFilter(this,'all')">All</button>
          <button class="fc" onclick="setAFilter(this,'food')">Food</button>
          <button class="fc" onclick="setAFilter(this,'drug')">Drug</button>
          <button class="fc" onclick="setAFilter(this,'env')">Environmental</button>
        </div>
      </div>

      <button class="btn bv" onclick="filterAllergy()" style="width:100%;justify-content:center;margin-top:8px">
        ğŸ”¬ AI Deep Analysis
      </button>

      <div id="ialerts" style="margin-top:24px"></div>
    </div>

    <!-- ANALYZER PAGE -->
    <div class="page" id="page-analyzer">
      <div class="sec-hdr">
        <h1 class="sh">ğŸ’Š Medicine Safety Analyzer</h1>
        <p class="shsub">Clinical pharmacist contraindication check</p>
      </div>

      <div class="fg">
        abel>Enter Medication Name</label>
        <input type="text" id="mname" class="fi" placeholder="e.g., Aspirin, Warfarin, Metformin...">
      </div>

      <button class="btn bv" onclick="checkMedSafety()" style="width:100%;justify-content:center">
        âš•ï¸ Check Drug Safety
      </button>

      <div id="ialerts-analyzer" style="margin-top:24px"></div>
    </div>

    <!-- CONSULT PAGE -->
    <div class="page" id="page-consult">
      <div class="sec-hdr">
        <h1 class="sh">ğŸ©º Consult Corner</h1>
        <p class="shsub">Symptom-based clinical triage</p>
      </div>

      <div class="fg">
        abel>Describe Your Symptoms</label>
        <textarea id="symptom-input" class="fi ta" rows="4" placeholder="E.g., Persistent headache for 3 days, dizziness, mild fever..."></textarea>
      </div>

      <button class="btn bv" onclick="analyzeSymptoms()" style="width:100%;justify-content:center">
        ğŸ§  AI Symptom Analysis
      </button>

      <div class="cspin" id="consult-spin" style="display:none;text-align:center;margin-top:18px">
        <div style="width:40px;height:40px;margin:0 auto;border:3px solid rgba(0,245,255,.3);border-top-color:var(--cyan);border-radius:50%;animation:spin 1s linear infinite"></div>
      </div>

      <div class="cres" id="consult-result">
        <div id="consult-output"></div>
      </div>
    </div>

    <!-- DASHBOARD PAGE -->
    <div class="page" id="page-dash">
      <div class="sec-hdr">
        <h1 class="sh">ğŸ“Š Health Dashboard</h1>
        <p class="shsub">Longitudinal health trends & AI insights</p>
      </div>

      <div class="stg">
        <div class="st">
          <div class="stv" id="sv1">0</div>
          <div class="stl">Health Score</div>
        </div>
        <div class="st">
          <div class="stv" id="sv2">0</div>
          <div class="stl">Reports Analyzed</div>
        </div>
      </div>

      <div id="dash-ai-insights" style="margin-bottom:24px"></div>

      <div class="chw">
        <div class="ch">
          <div class="cht">WBC & Platelet Trends</div>
          anvas id="cline"></canvas>
        </div>
        <div class="ch">
          <div class="cht">Risk Distribution</div>
          anvas id="cdough"></canvas>
        </div>
        <div class="ch">
          <div class="cht">Hemoglobin Levels</div>
          anvas id="chgb"></canvas>
        </div>
        <div class="ch">
          <div class="cht">RBC Count History</div>
          anvas id="crbc"></canvas>
        </div>
      </div>

      <div class="hlist">
        <div class="hh">
          <div class="hht">Analysis History</div>
          <div class="hha">
            <button class="btn bs" onclick="document.getElementById('hlist').innerHTML='';clearHist()">ğŸ—‘ï¸ Clear</button>
            <button class="btn" onclick="dlReport()">ğŸ“¥ Download Report</button>
          </div>
        </div>
        <div id="hlist"></div>
        <div class="dtot" id="dtot">0 / 12</div>
      </div>
    </div>

    <!-- FOOD PAGE -->
    <div class="page" id="page-food">
      <div class="sec-hdr">
        <h1 class="sh">
